generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum ReportType {
  FINAL_RESULTS
  VALIDATION_PROGRESS
  AUDIT_TRAIL
}

enum ReportFormat {
  PDF
  EXCEL
  CSV
  JSON
}

enum ReportStatus {
  GENERATING
  COMPLETED
  FAILED
}

model GeneratedReport {
  id            String      @id @default(uuid())
  reportType    ReportType
  format        ReportFormat
  filePath      String?     @db.VarChar(500)
  fileSize      BigInt?
  generatedBy   String      @db.VarChar(255)
  generatedAt   DateTime    @default(now())
  parameters    Json        @default("{}")
  contestId     BigInt?
  status        ReportStatus
  errorMessage  String?     @db.Text
  downloadCount Int         @default(0)
  expiresAt     DateTime?

  @@index([reportType, status])
  @@index([generatedAt])
  @@map("generated_reports")
}
